!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.fetchRest=n():e.fetchRest=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function u(e){return e.toString().replace(/(^\/+|\/+$)/g,"")}function i(e){return"function"==typeof e?e():e}function a(e){var n={};return Object.keys(e).forEach(function(t){var r=e[t];n[t]="object"===("undefined"==typeof r?"undefined":o(r))?a(r):i(r)}),n}function d(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],t=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],r={url:e,options:n,middlewares:{}};return r.browse=g.bind(null,r),r.read=p.bind(null,r),r.edit=h.bind(null,r),r.replace=v.bind(null,r),r.add=y.bind(null,r),r.destroy=b.bind(null,r),r.addMiddleware=s.bind(null,r),r.removeMiddleware=c.bind(null,r),t.length&&t.forEach(r.addMiddleware),r}function s(e,n){n._middlewareId||(n._middlewareId=T++),e.middlewares[n._middlewareId]=n}function c(e,n){n._middlewareId&&e.middlewares[n._middlewareId]&&delete e.middlewares[n._middlewareId]}function f(e,n,t,r){var d=[];return new Promise(function(d,s){var c=u(i(e.url))+"/";n=i(n),n instanceof Array||(n=[n]),n=n.map(i).map(u).map(encodeURI).join("/"),t="object"===("undefined"==typeof t?"undefined":o(t))?"?"+encodeURI(E["default"].stringify(a(t))):"",r=w({headers:{}},a(e.options),a(r)),d({url:c,path:n,query:t,options:r})}).then(function(n){return Object.keys(e.middlewares).forEach(function(t){var r=e.middlewares[t],o=r(n);"function"==typeof o&&d.push(o)}),fetch(n.url+n.path+n.query,n.options)}).then(function(e){if(!e.ok)throw e;if(!d.length)return e;var n=Promise.resolve(e)["catch"](function(e){throw e});return d.forEach(function(e){n=n.then(e)}),n})}function l(e){if(e=i(e),e instanceof Array&&e.length%2!==0)throw new RangeError("Expected even array");return e}function m(e){if(e=i(e),e instanceof Array&&e.length%2!==1)throw new RangeError("Expected odd array");return e}function g(e,n){var t=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return f(e,function(){return m(n)},t,w({action:"browse",method:"GET"},r))}function p(e,n){var t=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return f(e,function(){return l(n)},t,w({action:"read",method:"GET"},r))}function h(e,n){var t=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return f(e,function(){return l(n)},t,w({action:"edit",method:"PATCH"},r))}function v(e,n){var t=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return f(e,function(){return l(n)},t,w({action:"replace",method:"PUT"},r))}function y(e,n){var t=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return f(e,function(){return m(n)},t,w({action:"add",method:"POST"},r))}function b(e,n){var t=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return f(e,function(){return l(n)},t,w({action:"destroy",method:"DELETE"},r))}var w=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},j=t(5),E=r(j),_=t(3),x=r(_),A=t(4),M=r(A),O=t(2),I=r(O),P=t(1),R=r(P);if("function"!=typeof fetch)throw new TypeError("Fetch API required but not available");var T=23e3;e.exports={connectEndpoint:d,addMiddleware:s,removeMiddleware:c,browse:g,read:p,edit:h,add:y,destroy:b,jsonMiddleware:x["default"],useragentMiddleware:M["default"],basicauthMiddleware:I["default"],authMiddleware:R["default"]}},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){return function(n){n.options.headers.Authorization="Bearer "+e}}},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e,n){var t=arguments.length<=2||void 0===arguments[2]?null:arguments[2];return function(r){if("undefined"==typeof btoa&&!t)throw new TypeError("btoa() function required but not available");r.options.headers.Authorization="Basic "+btoa(e+":"+n)}}},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=n.before=function(e){e.options.headers.Accept="application/json",e.options.headers["Content-Type"]="application/json; charset=utf-8"},r=n.after=function(e){return e.json()};n["default"]=function(e){return t(e),r}},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){return function(n){"string"!=typeof e&&(e=Object.keys(e).map(function(n){return[n,e[n]].join("/").replace(/[\t\r\n\s]+/g,"-")}).join(" ")),n.options.headers["User-Agent"]=e}}},function(e,n,t){"use strict";var r=t(6);n.extract=function(e){return e.split("?")[1]||""},n.parse=function(e){return"string"!=typeof e?{}:(e=e.trim().replace(/^(\?|#|&)/,""),e?e.split("&").reduce(function(e,n){var t=n.replace(/\+/g," ").split("="),r=t.shift(),o=t.length>0?t.join("="):void 0;return r=decodeURIComponent(r),o=void 0===o?null:decodeURIComponent(o),e.hasOwnProperty(r)?Array.isArray(e[r])?e[r].push(o):e[r]=[e[r],o]:e[r]=o,e},{}):{})},n.stringify=function(e){return e?Object.keys(e).sort().map(function(n){var t=e[n];return void 0===t?"":null===t?n:Array.isArray(t)?t.sort().map(function(e){return r(n)+"="+r(e)}).join("&"):r(n)+"="+r(t)}).filter(function(e){return e.length>0}).join("&"):""}},function(e,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}}])});