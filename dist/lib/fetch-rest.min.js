!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.fetchRest=t():n.fetchRest=t()}(this,function(){return function(n){function t(e){if(r[e])return r[e].exports;var o=r[e]={exports:{},id:e,loaded:!1};return n[e].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=n,t.c=r,t.p="",t(0)}([function(n,t,r){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}function o(n){return n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n}function u(n){return n.toString().replace(/(^\/+|\/+$)/g,"")}function i(n){return"function"==typeof n?n():n}function a(n){var t={};if("function"!=typeof n[Symbol.iterator])return n;var r=!0,e=!1,u=void 0;try{for(var s,f=n[Symbol.iterator]();!(r=(s=f.next()).done);r=!0){var c=w(s.value,2),d=c[0],l=c[1];t[d]="object"===("undefined"==typeof l?"undefined":o(l))?a(l):i(l)}}catch(g){e=!0,u=g}finally{try{!r&&f["return"]&&f["return"]()}finally{if(e)throw u}}return t}function s(n){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],e={url:n,options:t,middlewares:r};return e.browse=g.bind(null,e),e.read=m.bind(null,e),e.edit=p.bind(null,e),e.replace=h.bind(null,e),e.add=v.bind(null,e),e.destroy=y.bind(null,e),e.addMiddleware=f.bind(null,e),e}function f(n,t){n.middlewares.push(t)}function c(n,t,r,e){var s=[];return new Promise(function(s,f){var c=u(i(n.url))+"/";t=i(t),t instanceof Array||(t=[t]),t=t.map(i).map(u).map(encodeURI).join("/"),r="object"===("undefined"==typeof r?"undefined":o(r))?"?"+encodeURI(E["default"].stringify(a(r))):"",e=b({headers:{}},a(n.options),a(e)),s({url:c,path:t,query:r,options:e})}).then(function(t){return n.middlewares.forEach(function(n){var r=n(t);"function"==typeof r&&s.push(r)}),fetch(t.url+t.path+t.query,t.options)}).then(function(n){if(!n.ok)throw n;if(!s.length)return n;var t=Promise.resolve(n)["catch"](function(n){throw n});return s.forEach(function(n){t=t.then(n)}),t})}function d(n){if(n=i(n),n instanceof Array&&n.length%2!==0)throw new RangeError("Expected even array");return n}function l(n){if(n=i(n),n instanceof Array&&n.length%2!==1)throw new RangeError("Expected odd array");return n}function g(n,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],e=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return c(n,function(){return l(t)},r,b({method:"GET"},e))}function m(n,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],e=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return c(n,function(){return d(t)},r,b({method:"GET"},e))}function p(n,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],e=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return c(n,function(){return d(t)},r,b({method:"PATCH"},e))}function h(n,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],e=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return c(n,function(){return d(t)},r,b({method:"PUT"},e))}function v(n,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],e=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return c(n,function(){return l(t)},r,b({method:"POST"},e))}function y(n,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],e=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return c(n,function(){return d(t)},r,b({method:"DELETE"},e))}var b=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n},w=function(){function n(n,t){var r=[],e=!0,o=!1,u=void 0;try{for(var i,a=n[Symbol.iterator]();!(e=(i=a.next()).done)&&(r.push(i.value),!t||r.length!==t);e=!0);}catch(s){o=!0,u=s}finally{try{!e&&a["return"]&&a["return"]()}finally{if(o)throw u}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=r(1),E=e(x);if("function"!=typeof fetch)throw new TypeError("Fetch API required but not available");n.exports={createEndpoint:s,addMiddleware:f,browse:g,read:m,edit:p,add:v,destroy:y}},function(n,t,r){"use strict";var e=r(2);t.extract=function(n){return n.split("?")[1]||""},t.parse=function(n){return"string"!=typeof n?{}:(n=n.trim().replace(/^(\?|#|&)/,""),n?n.split("&").reduce(function(n,t){var r=t.replace(/\+/g," ").split("="),e=r.shift(),o=r.length>0?r.join("="):void 0;return e=decodeURIComponent(e),o=void 0===o?null:decodeURIComponent(o),n.hasOwnProperty(e)?Array.isArray(n[e])?n[e].push(o):n[e]=[n[e],o]:n[e]=o,n},{}):{})},t.stringify=function(n){return n?Object.keys(n).sort().map(function(t){var r=n[t];return void 0===r?"":null===r?t:Array.isArray(r)?r.sort().map(function(n){return e(t)+"="+e(n)}).join("&"):e(t)+"="+e(r)}).filter(function(n){return n.length>0}).join("&"):""}},function(n,t){"use strict";n.exports=function(n){return encodeURIComponent(n).replace(/[!'()*]/g,function(n){return"%"+n.charCodeAt(0).toString(16)})}}])});